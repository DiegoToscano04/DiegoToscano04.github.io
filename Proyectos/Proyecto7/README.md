<p align="center">  Elaboración Proyecto 7 VM I: Stack Arithmetic </p>

<h4 align="center">  ARQUITECTURA DE COMPUTADORES A2 </h4>


<p align="center">  WEB GRUPO ALPHA:
https://diegotoscano04.github.io/  </p>
<p align="center"> <img src= "https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/4f2cd469-f8a6-482a-8f92-33960615841e"> </p>

------------

# Aprendizaje herramienta The Nand to Tetris

## Software:
###### El paquete de software Nand to Tetris contiene todas las herramientas y archivos necesarios para completar todos los proyectos descritos en este sitio y en el libro "The Elements of Computing Systems".

## Descarga:
###### Se descarga el programa Nand2Tetris de la página web: https://www.nand2tetris.org/software
###### Una vez descargados los archivos quedará una carpeta con el nombre de `nand2tetris` con 2 subcarpetas denominadas `projects` y `tools`.
![image](https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/d058171f-9976-4289-bb46-fc4ff46c9729) ![image](https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/417ef519-6948-40a5-9c36-775b71ab4c82)

## Información sobre los archivos:
###### En la carpeta `projects` estarán los proyectos del 1 al 13 los cuales son archivos que deben modificarse para completar las prácticas mientras se trabaja en varios proyectos de nand2tetris.
###### En la carpeta `tools` estarán las herramientas del software nand2tetris.

## Uso del programa VM emulator 
<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/32618071-ced9-417f-b99b-72187e6840d7" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/1D7zmC6RfaR2GDG385M1pv80Q3UR4PsdC/edit?pli=1#slide=id.p8</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/d17fdb7f-66f7-462e-8e90-8cf84d066091" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/1D7zmC6RfaR2GDG385M1pv80Q3UR4PsdC/edit?pli=1#slide=id.p8</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/2267978b-e3dd-4555-8c32-16a85fbee744" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/1D7zmC6RfaR2GDG385M1pv80Q3UR4PsdC/edit?pli=1#slide=id.p8</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/25035db8-6837-4a80-86d0-c3c44337f782" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/1D7zmC6RfaR2GDG385M1pv80Q3UR4PsdC/edit?pli=1#slide=id.p8</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/71a0d17e-160d-43f6-9535-524176c40585" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/1D7zmC6RfaR2GDG385M1pv80Q3UR4PsdC/edit?pli=1#slide=id.p8</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/2b988c2c-0dcc-4c83-b0e6-80852b5513cc" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/1D7zmC6RfaR2GDG385M1pv80Q3UR4PsdC/edit?pli=1#slide=id.p8</p>

## Uso del programa CPUEmulator
<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/831c8911-a1a7-4444-b732-23f1aa21c92a" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/16DQsZZS9kd50JpK15QKPL8NVqf3Ic912/edit#slide=id.p9</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/bdd10740-561f-406c-9963-b4765df24ac8" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/16DQsZZS9kd50JpK15QKPL8NVqf3Ic912/edit#slide=id.p9</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/37bb2a75-791c-4cd3-8ec4-e56d0201e0d1" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/16DQsZZS9kd50JpK15QKPL8NVqf3Ic912/edit#slide=id.p9</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/11ee677d-e27b-4da1-b2aa-6d2e3442331f" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/16DQsZZS9kd50JpK15QKPL8NVqf3Ic912/edit#slide=id.p9</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/27cd3171-ab6b-4e57-9050-d429f5ae0a71" width="500" height="300" /></p>
<p align="center">Fuente: https://docs.google.com/presentation/d/16DQsZZS9kd50JpK15QKPL8NVqf3Ic912/edit#slide=id.p9</p>

##### En la parte final de cada evaluación podemos corroborar con un mensaje de :`File compilation & comparison succeeded` si realizamos la actividad de manera satisfactoria.

### Desarrollo Proyecto 7:

##### En el siguiente proyecto se va a implementar la elaboración de un compilador de dos niveles, el compilador jack genera código VM para una máquina virtual, posteriormente el código VM es traducido a lenguaje de máquina usando un programa denominado traductor VM, el propósito de este proyecto es elaborar una versión temprana o básica de dicho traductor VM para posteriormente completarlo en el siguiente proyecto.

## Objetivos Generales

- Escribir un programa que lea y analice los comando de la VM.
- Debe leer un programa a la vez y generar instrucciones hack que se ejecuten en la VM.
------------

## Objetivos Específicos

- Implementar en cualquier lenguaje de programación un traductor de VM a hack.
- Hacer uso de los archivos en las carpetas `MemoryAccess` y `StackArithmetic` y de las herramientas proporsionadas por Nand2Tetris: `The CPU emulator` y `The VM emulator`para llevar a cabo las comparaciones de los archivos de test y comprobar su correcto funcionamiento.
-----------

## Pasos

1. Utilizar el traductor nuestro parcialmente implementado para traducir Xxx.vm. El resultado debería ser un archivo de texto llamado Xxx.asm, que contiene el código ensamblador Hack generado por nuestro traductor.
2. Inspeccione el código Xxx.asm generado por el traductor. Si hay errores visibles de sintaxis (o cualquier otro) error, depure y corrija su traductor.
3. Utilizar el script Xxx.tst suministrado para cargar, ejecutar y probar en el emulador de CPU, el programa Xxx.asm creado por el  traductor VM.

#### Construcción del traductor VM:

El código VM que genera el compilador está diseñado para operar en una máquina de pila abstracta. El traductor de la máquina virtual traduce este código a máquina, dicho de otro modo: el traductor VM realiza / implementa
la máquina de pila abstracta en la plataforma host.

#### Operaciones básicas:

##### push: añade un elemento en la parte superior de la pila
##### pop: elimina el elemento superior

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/000f3b63-342e-4103-a7b6-f1fbff71953a"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1BPmhMLu_4QTcte0I5bK4QBHI8SACnQSt/view</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/28ddc899-15cf-4458-b3dd-e11b77a4cea1"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1BPmhMLu_4QTcte0I5bK4QBHI8SACnQSt/view</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/a215b153-af67-4c6b-ba05-26f5cca17d04"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1BPmhMLu_4QTcte0I5bK4QBHI8SACnQSt/view</p>

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/e48e8121-f484-4250-85b7-e3afff6436b3"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1BPmhMLu_4QTcte0I5bK4QBHI8SACnQSt/view</p>


##### Cuando el compilador compila un método de alto nivel, representa:

1. Las variables locales del método en el segmento virtual local
2. Los argumentos del método en el segmento virtual argument
3. Los campos del objeto actual en el segmento virtual this
4. Los elementos del array actual en el segmento virtual that

##### Variables Estáticas:

Un programa Jack es una colección de una o más clases Jack
- Cada clase es una unidad de compilación independiente
- Cada archivo de clase Foo.jack se compila en un archivo VM llamado Foo.vm
- El compilador asigna las variables estáticas a nivel de clase de todas las clases en un segmento VM llamado static

##### Segmento estático:

El segmento estático se almacena en un bloque de RAM fijo, comenzando en la dirección 16; al traducir un archivo VM llamado Foo.vm: Para push/pop static i,, genera código ensamblador que ejecute push/pop Foo.i.

Posteriormente, el ensamblador Hack asignará cada símbolo Foo.i en el código ensamblador generado en RAM[16], RAM[17], ..., RAM[255].

##### Objects and arrays

1. Los objetos y matrices que manipulan los programas se almacenan en la RAM
2. Los campos del objeto actual están representados por el segmento this
3. Los elementos del array actual están representados por el segmento that
4. Las direcciones base de this y that se almacenan en los punteros THIS y THAT así como en los punteros 0 y 1 (un segmento de dos posiciones)

Para push/pop puntero 0, genera un código ensamblador que ejecute: push/pop THIS
Para push/pop puntero 1, genera un código ensamblador que ejecute: push/pop THAT

##### Abstracción

Cada comando aritmético/lógico extrae uno o dos valores de la pila, calcula una de estas funciones sobre estos valores y coloca el valor calculado en la pila.

#### implementación VM

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/ac2c987e-4e9f-4d48-a09a-39bae3782c84"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1BPmhMLu_4QTcte0I5bK4QBHI8SACnQSt/view</p>

#### Emulando un programa VM:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/784045bd-10ba-4663-ad42-9d7221d78985"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1BPmhMLu_4QTcte0I5bK4QBHI8SACnQSt/view</p>

#### Test de un programa VM:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/2918f48c-cbb7-4fcd-98bb-f69edd5d5786"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1BPmhMLu_4QTcte0I5bK4QBHI8SACnQSt/view</p>

##### Recopilación de programas:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/eae954ba-77fe-4cd1-8b18-12d87cc5a952"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1BPmhMLu_4QTcte0I5bK4QBHI8SACnQSt/view</p>

##### Traductor VM funcionamiento:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/d0a81d88-cd2a-4399-906b-54450431d371"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1BPmhMLu_4QTcte0I5bK4QBHI8SACnQSt/view</p>


##### First Pass: Lee las líneas del programa, una a una, centrándose sólo en las declaraciones (de etiquetas). Añade las etiquetas encontradas a la tabla de símbolos

##### Second Pass (bucle principal): (comienza de nuevo desde el principio del fichero) Mientras haya más líneas que procesar: Obtiene la siguiente instrucción, y la analiza si la instrucción es @ símbolo, si el símbolo no está en la tabla de símbolos, lo añade a la tabla y traduce el símbolo a su valor binario.

##### Si la instrucción es dest =comp ; jump traduce cada uno de los tres campos a su valor binario y ensambla los valores binarios descritos anteriormente en una cadena de dieciséis 0's y 1's escribiendo la cadena en el fichero de salida.

#### Arquitectura del ensamblador:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/83f1dce3-734d-47c8-b979-92066f2d6adb"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1uKGRMnL-gqk9DsgeN50z0EpHoSMWe6F5/view</p>

#### Contrucción SymbolTable:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/5b519b34-166b-4081-b622-aecf3ece8bfb"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

#### Construcción Code:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/83f77ef3-a53a-4b8f-9c1c-8e3930f0f4ff"/></p>
<p align="center">Fuente: https://drive.google.com/file/d/1uKGRMnL-gqk9DsgeN50z0EpHoSMWe6F5/view</p>

### COMP:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/4fc0734a-ac30-4309-9e4a-edec737fff16"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

### DEST:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/08ffc2db-bb59-45df-a242-e3c6748c3b96"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

### JUMP:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/5b96279b-abec-4858-a584-0b34f5431d8c"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

#### Construcción Parser:

### variableSpot:

<p align="center"><img src="!https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/8d7e63cb-2beb-478e-bc76-d8ec304761d4"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

### First pass: 

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/da9496ee-dbe2-4f8b-a385-4bf2e787404f"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

### Second pass:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/d6d4539e-6875-4774-82e7-1fb67f96da59"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

### strip:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/82c665c4-20b1-4e8d-aaef-b7bfa0a3052c"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

### fullFill

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/dd39382a-d018-48f7-9f3a-7175018f838e"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

### Documentos a evaluar:

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/60fe06e9-2104-4dd9-bae3-b3ae31208b6c"/></p>
<p align="center">Fuente: Propiedad de los autores</p>


## Pruebas de funcionamiento:

Al ejecutar nuestro ensamblador realizado en phyton nos arroja los archivos `xxx.hack` de cada uno de los ficheros a convertir

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/dd8dae90-cb7d-4704-9a05-792e24f39bac"/></p>
<p align="center">Fuente: Propiedad de los autores</p>

Procedemos a realizar la prueba para cada uno de los archivos con la extensión `xxx.hack` para comprobar su correcto funcionamiento.

<h3 align="center">Add.asm</h3>

#### Convertimos el archivo `Add.asm` a `Add.hack` por medio de nuestro ensamblador y lo comparamos a través de la herramienta Assembler (2.5) con el archivo fuente `Add.asm` que nos provee el proyecto 6.

<p align="center"><img src="https://github.com/DiegoToscano04/DiegoToscano04.github.io/assets/129452906/bc69f10f-f67e-4333-b129-a1b345873561" width="500" height="450" /></p>
<p align="center">Fuente: Propiedad de los autores</p>

Corroboramos que la conversión de código escrito en lenguaje de máquina simbólico a código escrito en lenguaje de máquina binario es correcta.



-------------------
#### Pregunta
¿?<br>



